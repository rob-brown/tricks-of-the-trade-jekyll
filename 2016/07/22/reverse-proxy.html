<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Reverse Proxy | Tricks of the Trade</title>
<meta name="generator" content="Jekyll v3.9.0" />
<meta property="og:title" content="Reverse Proxy" />
<meta name="author" content="Robert Brown" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="When setting up my personal website, I had a temporary server running for an Alexa project I was working on. Two applications cannot bind to the same port. To solve this I used a reverse proxy." />
<meta property="og:description" content="When setting up my personal website, I had a temporary server running for an Alexa project I was working on. Two applications cannot bind to the same port. To solve this I used a reverse proxy." />
<link rel="canonical" href="/2016/07/22/reverse-proxy.html" />
<meta property="og:url" content="/2016/07/22/reverse-proxy.html" />
<meta property="og:site_name" content="Tricks of the Trade" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2016-07-22T00:03:00+00:00" />
<script type="application/ld+json">
{"datePublished":"2016-07-22T00:03:00+00:00","author":{"@type":"Person","name":"Robert Brown"},"dateModified":"2016-07-22T00:03:00+00:00","description":"When setting up my personal website, I had a temporary server running for an Alexa project I was working on. Two applications cannot bind to the same port. To solve this I used a reverse proxy.","url":"/2016/07/22/reverse-proxy.html","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"/2016/07/22/reverse-proxy.html"},"headline":"Reverse Proxy","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="/feed.xml" title="Tricks of the Trade" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Tricks of the Trade</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about">About</a><a class="page-link" href="/hire-me">Hire Me</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Reverse Proxy</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2016-07-22T00:03:00+00:00" itemprop="datePublished">Jul 22, 2016
      </time>• <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span class="p-author h-card" itemprop="name">Robert Brown</span></span></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p>When setting up my personal website, I had a temporary server running for an Alexa project I was working on. Two applications cannot bind to the same port. To solve this I used a reverse proxy.</p>

<p>To best understand a <a href="https://en.wikipedia.org/wiki/Reverse_proxy">reverse proxy server</a>, it helps to first understand a <a href="https://en.wikipedia.org/wiki/Proxy_server">forward proxy server</a>. In a client-server relationship, a forward proxy acts in place for the client. A reverse proxy acts in place for the server.</p>

<p>The basic idea is the reverse proxy binds to port 80 and 443. When a request arrives the server evaluates some rules. Those rules are used to determine if the request is to be forwarded to another server. In this case another server running on the same machine.</p>

<p>To create the reverse proxy I used <a href="http://nginx.org">ngnix</a>. There are plenty alternatives. I chose nginx since it’s what I know best.</p>

<p>The first configuration is very simple. It just serves static content.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># Tricks of the Trade
server {
  listen tricksofthetrade.pro:80;
  server_name tricksofthetrade.pro;

  root /var/www/tricksofthetrade.pro/public_html;
  index index.html;
}
</code></pre></div></div>

<p>The second configuration is more complicated. For clarity, I left out the SSL handling details. Simply put, any requests on port 443 with a path that starts with <code class="language-plaintext highlighter-rouge">/alexa</code> are forwarded to my Alexa server on port 6443.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># Alexa Server
server {
  listen 443 ssl;
  server_name tricksofthetrade.pro;
  # ...
  proxy_redirect off;

  location /alexa {
    proxy_pass https://localhost:6443;
  }
}
</code></pre></div></div>

<p>Note, an added benefit of running the Alexa server on port 6443 is that it no longer needs to run with super user permissions.</p>

<p>Each configuration is stored in a separate file. It allows me to easily enable and disable individual servers.</p>

<p>The Alexa server is no longer running, but building the reverse proxy was a good exercise. Now that it’s in place, setting up and tearing down other servers will be easy.</p>

  </div><a class="u-url" href="/2016/07/22/reverse-proxy.html" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Tricks of the Trade</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Tricks of the Trade</li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/rob-brown"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">rob-brown</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>Writing about best development practices and other topics.</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
